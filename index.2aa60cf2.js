var e=0,r=!1,t=!1,o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function a(){n(),n(),e=0,r=!1,t=!1,s(),document.querySelector(".message-start").classList.add("hidden"),document.querySelector(".button.start").textContent="Restart",document.querySelector(".button.start").classList.add("restart")}function n(){for(var e=[],r=0;r<4;r++)for(var t=0;t<4;t++)0===o[r][t]&&e.push({row:r,column:t});if(0!==e.length){var a=e[Math.floor(Math.random()*e.length)];o[a.row][a.column]=.9>Math.random()?2:4}}function s(){document.querySelectorAll(".field-cell").forEach(function(e,r){var t=Math.floor(r/4),a=r%4;e.textContent=0===o[t][a]?"":o[t][a],e.className="field-cell",0!==o[t][a]&&e.classList.add("field-cell--"+o[t][a])}),document.querySelector(".game-score").textContent=e,function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(2048===o[e][r])return!0;return!1}()?(r=!0,document.querySelector(".message-win").classList.remove("hidden")):function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(0===o[e][r]||e<3&&o[e][r]===o[e+1][r]||r<3&&o[e][r]===o[e][r+1])return!1;return!0}()&&(t=!0,document.querySelector(".message-lose").classList.remove("hidden"))}function f(r,t,a){o[r][t]*=2,e+=o[r][t],o[a][t]=0}function c(r,t,a){o[a][r]*=2,e+=o[a][r],o[a][t]=0}document.addEventListener("keydown",function(e){!function(e){if(!r&&!t){var a=!1;switch(e){case"ArrowUp":a=function e(){for(var r=!1,t=0;t<4;t++)for(var a=1;a<4;a++)if(0!==o[a][t])for(var n=a-1;n>=0&&n===a-1;){if(0===o[n][t])o[n][t]=o[a][t],o[a][t]=0,a=n,r=!0,e();else if(o[n][t]===o[a][t]){f(n,t,a),r=!0;break}else break;n--}return r}();break;case"ArrowDown":a=function e(){for(var r=!1,t=0;t<4;t++)for(var a=2;a>=0;a--)if(0!==o[a][t])for(var n=a+1;n<4&&n===a+1;){if(0===o[n][t])o[n][t]=o[a][t],o[a][t]=0,a=n,r=!0,e();else if(o[n][t]===o[a][t]){f(n,t,a),r=!0;break}else break;n++}return r}();break;case"ArrowLeft":a=function e(){for(var r=!1,t=0;t<4;t++)for(var a=3;a>0;a--)if(0!==o[t][a])for(var n=a-1;n>=0&&n===a-1;){if(0===o[t][n])o[t][n]=o[t][a],o[t][a]=0,a=n,r=!0,e();else if(o[t][n]===o[t][a]){c(n,a,t),r=!0;break}else break;n--}return r}();break;case"ArrowRight":a=function e(){for(var r=!1,t=0;t<4;t++)for(var a=0;a<3;a++)if(0!==o[t][a])for(var n=a+1;n<4&&n===a+1;){if(0===o[t][n])o[t][n]=o[t][a],o[t][a]=0,a=n-1,r=!0,e();else if(o[t][n]===o[t][a]){c(n,a,t),r=!0;break}else break;n++}return r}()}a&&(n(),s())}}(e.key)}),document.querySelector(".button.start").addEventListener("click",function(){for(var n=!1,s=0;s<4;s++)for(var f=0;f<4;f++)if(0!==o[s][f]){n=!0;break}!0===n?(t||r||alert("Are you sure you want to start a new game? All progress will be lost."),function(){for(var n=0;n<4;n++)for(var s=0;s<4;s++)o[n][s]=0;e=0,r=!1,t=!1,document.querySelector(".message-lose").classList.add("hidden"),document.querySelector(".message-win").classList.add("hidden"),a()}()):a()});
//# sourceMappingURL=index.2aa60cf2.js.map
